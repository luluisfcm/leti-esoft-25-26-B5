@startuml
title SD-RestAPI-READ – US41 Get Available Vaccines
autoactivate on
autonumber

participant "Nurse" as Actor
participant ":HTTPClient" as Client
participant ":HTTPServer" as Server
participant "handler:RouteHandler" as System
participant ":VaccineAdministrationController" as Ctrl
participant ":Nurse" as Role
participant "service:VaccinationService" as Service
participant "factory:RepositoryFactory" as Factory
participant "vacRepo:VaccineRepository" as Repo
participant "result:HttpResult" as Result

activate Actor

Actor -> Client: requests to view available vaccines
Client -> Server: GET /api/vaccines
Server -> System: run(req, resp)
System -> Ctrl: getAvailableVaccines()

' Obtendo o serviço [cite: 18, 23]
Ctrl -> Role: getVaccinationService()
Role -> Factory: getVaccineRepository()
Factory --> Role: vacRepo
Role --> Service**: create(vacRepo)
Role --> Ctrl: service

' Lógica de leitura com DTO para proteção do domínio
Ctrl -> Service: getVaccinesDTO()
Service -> Repo: findAll()
Repo --> Service: vaccinesList
Service -> Service: mapToDTO(vaccinesList)
Service --> Ctrl: vaccinesDTOList

' Resposta HTTP [cite: 18]
Ctrl -> Result**: create(200, vaccinesDTOList)
Ctrl --> System: result
System -> System: setHttpResult(resp, result)
System --> Server: resp
Server --> Client: resp
Client --> Actor: displays vaccines list
@enduml